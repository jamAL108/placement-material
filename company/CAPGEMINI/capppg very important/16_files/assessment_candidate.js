var checkSubmitInterval=5000;var maxSubmitRetryCount=10;var maxLoadRetryCount=10;var mcqInterval=10000;var logoutPath="/logout";var subAnsAutoSaveInterval=45000;var retrySubmitCount=0;var tickRetryCount=0;var foc=0,fot=0,foct=0,ifin=true;var answerAjax={t:0,r:null};var olist=[];var slist=[];var mcqlist={};var submitTimer=null;var $body,$window,$document;var $timerObject=null;var $networkObject=null;var assessdata={};var imgLoad='<img src="//static.cocubes.com/pics/load_s.gif" alt="" width="16" height="11" style="vertical-align:middle;max-width:16px;max-height:11px;" valign="middle;" /> &nbsp;';var __ongoingservice__="../ongoing-mcq/";var isMobileDevice=window.screen.width<=600||window.screen.height<=400;var firstGroupTop=-1;var submitparams={service:"/savemyresponse",retryspan:"#spanRetryingSubmit",submitspan:"#submitProgress",correctImg:"<span class='logosprite correct'>&nbsp;</span>",wrongImg:"<span class='logosprite wrong'>&nbsp;</span>"};$(function(){$body=$("body");$window=$(window);$document=$(document);window.wbcm=window.wbcm||{monitor:false,mandatory:false,profile:false};window.tickInterval=window.tickInterval||30;var c=window.browser||15;var g=13;var f=[];if(c<g){f.push("ie","ie"+c);for(var a=g;a>=c&&a>=6;a--){f.push("ie-lte"+a);}for(var d=6;d<c;d++){f.push("ie-gt"+a);}if(c<8){$.fx.off=true;}}else{f.push("no-ie");}$("html").addClass(f.join(" "));if(c<8){$.fx.off=true;}if(!isMobileDevice){checkIfMobileDevice();}$.ls.checkLocalStorage();var h=$.ls.getsd();if(h.isb&&typeof window.stl!="undefined"){$("#ld_main").html("Trying to submit your Assessment"+(h.ua.qna.length>1?" and unsaved answers":" . . ."));$("#ld_what").html("");$body.addClass("submitted");maxSubmitRetryCount=window.stl>50?Math.round(window.stl/(checkSubmitInterval/1000)):10;h.ua.alsub=1;submitparams.submitspan="#ld_main";submitparams.retryspan="#ld_what";submitparams.correctImg="";submitparams.wrongImg="";fireSubmit(h.ua);}else{loadrequiredscripts();}if(window.innerHeight==screen.height){document.title=window.location+" - "+document.title;}});function checkIfMobileDevice(){var c=navigator.userAgent;if(c){var a=[/iPhone|iPod|iPad/i,/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,/Android|IEMobile/i,/(?=.*\bWindows\b)(?=.*\bARM\b)/i,/BlackBerry|BB10|Opera Mini/i,/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i")];for(var b in a){isMobileDevice=a[b].test(c);if(isMobileDevice){break;}}}}function setAssessment(){var d=$("#instructions").find(".group-title").off("click").click(function(){d.toggleClass("group-selected");}).end();window.tickRetryMaxCount=window.tickRetryMaxCount||120;$document.off("keydown selectstart contextmenu").on("keydown.assessment",function(f){if(stopKey(f.target.type,f.which,f.ctrlKey,f.altKey)){f.returnValue=false;f.keyCode=0;f.preventDefault();return false;}return true;}).on("selectstart.assessment",function(f){f.preventDefault();return false;}).addClass("unselectable").attr("unselectable","on").on("contextmenu.assessment",function(f){f.preventDefault();return false;});$($window,$document,"#divMain").off("copy").on("copy.assessment",function(f){f.preventDefault();return false;});var b=$("#header");var a=$("#divgroupmenu");$window.on("scroll",function(){if($window.scrollTop()>100){if(b.hasClass("scroll")===false){b.addClass("scroll").find(".camHolder").triggerHandler("resize.webcam",{width:60,height:48});}}else{if(b.hasClass("scroll")){b.removeClass("scroll").find(".camHolder").triggerHandler("resize.webcam",{width:90,height:68});if(isMobileDevice){a.hide();}}}});var c=b.find("#tdMenu");if(isMobileDevice){$body.addClass("ismobile");if(window.assessdata.qp.length>1){c.append(a.remove()).click(function(){a.toggle();}).end();}else{c.remove();}}else{c.remove();}arf(true);$.sclft();}function gettl(){return($timerObject&&$timerObject.val)?$timerObject.val():0;}function getprevtime(){return($timerObject&&$timerObject.prevtime)?$timerObject.prevtime():0;}function arf(a){window.onbeforeunload=null;if(a){window.onbeforeunload=function(){$.getJSON(__ongoingservice__+"lcaw",{tl:gettl()});return"You haven't submitted the assessment yet, are you sure you want to close the window?";};}}function getScript(f,a,e,d,b){if(a){if(!e){e="script";}var c={crossDomain:e==="script",url:f,cache:true,type:"GET",dataType:e};if(d){c.success=d;}if(b){c.error=b;}$.ajax(c);}else{if(d){d();}}}function loadrequiredscripts(){var h=[];$("#ld_main").html("Fetching required files from server");if(typeof($.fn.timer)=="undefined"){h.push({u:"//scripts.cocubes.com/jquery.timer.js?v=4.5.3",n:"Time Monitor",t:"script"});}if(window.isprog){var a="//scripts.cocubes.com/codemirror/";var b="5.18.3";if(typeof(window.CodeMirror)=="undefined"){h.push({u:a+(window.browser<8?"codemirror-ie6.js?v=2.23.1":"codemirror.edge.js?v="+b),n:"Code Syntax Highlighter",t:"script"});}if(typeof($.fn.codebox)=="undefined"){h.push({u:"//scripts.cocubes.com/jquery.codebox.js?v=171017012545AM",n:"Coding Engine Editor",t:"script"});}if(typeof($.fn.codeboxskin)=="undefined"){h.push({u:(window.browser>8?"//scripts.cocubes.com/jquery.codeboxconsole.js?v=171017012545AM":"//scripts.cocubes.com/jquery.codeboxgeneric.js?v=171017012545AM"),n:"Skin for Coding Engine",t:"script"});}if(window.apl>0){var d=[{file:"clike",name:"C, C++, C#, Java",languages:15},{file:"vb",name:"VB.net",languages:16},{file:"php",name:"PHP",languages:32},{file:"perl",name:"Perl",languages:64},{file:"python",name:"Python",languages:128}];for(var c=d.length-1;c>=0;c--){var g=d[c];if((window.apl&g.languages)!=0){h.push({u:a+g.file+".js?v="+b,n:"Syntax Highlighter for "+g.name,t:"script"});}}}}if(window.issub){h.push({u:"//scripts.cocubes.com/jquery.maxwords.edge.js?v=3.0.0",n:"Subjective Answer Words Calculator",t:"script"});}if(window.wbcm.profile||window.wbcm.monitor){h.push({u:"//scripts.cocubes.com/jquery.webcam.js?v=4.0.1",n:"Online Proctor",t:"script"});}if(h.length>0){var f=0;(function e(j){var i=j[0];$("#ld_what").html("Downloading - "+i.n);getScript(i.u,true,i.t,function(k){f=0;if(i.c){i.c(k);}if(j.length>1){e(j.slice(1));}else{scriptLoaded();}},function(){if(f<3){f++;e(j);}else{$("#ld_main").html("Unable to load script files, check your Internet . . .");$("#ld_what").html("Download failed - "+i.n);}});})(h);}else{scriptLoaded();}}function scriptLoaded(){if(typeof setupCamera!=="undefined"){setupCamera(loadAssessment);}else{loadAssessment();}}function loadAssessment(){var b="/loadmypaper/";var d=["assessmentplus","preassess","universityexams","cocubescontest","companyquiz"];$("#ld_main").html("Downloading question paper, please wait . . .");var a=window.loadTryCount||0;if(a==0){$("#ld_what").html("It might take sometime depending on your network speed, please refresh if paper doesn't load in 2 minutes . . .");}$body.addClass("loading-content");var c=a%d.length;$.ajax({type:"POST",url:b+d[c],data:{rc:a,ts:$.now(),uid:window.uid,tid:window.tid,whyretry:window.whyretry||"",ie:window.browser,image:window.profilepic},cache:false,dataType:"json",error:function(e){assessmentReload(e,a);},success:function(e){if(e){if(e.l===true){submitTestMsg(e.m);}else{if(e.rload===true&&a<maxLoadRetryCount){location.href="?ts="+$.now()+"&rc="+(++a);}else{if(e.rload===false){$("#ld_main").html(e.m||"Error loading question paper. Try again later . . .");$("#ld_what").html("");}else{if(e.qp&&e.tl>0){renderAssessment(e);}else{assessmentReload({status:"200",statusText:"Success but invalid data!!"},a);}}}}}else{assessmentReload({status:"200",statusText:"Success but empty data!!"},a);}}});}function assessmentReload(c,b){if(c){var a=[];if(c.status){a.push("status:"+c.status);}if(c.statusText){a.push("text:"+c.statusText);}window.whyretry=a.join(",");}b++;$("#ld_main").html("Retrying to load question paper, check your Internet connection . . .");if(b<maxLoadRetryCount){$("#ld_what").html("Trying to load your question paper again, trial count : "+b);window.loadTryCount=b;setTimeout(loadAssessment,500);}else{$("#ld_main").html("Unable to load paper, check Internet connection and login again . . .");$("#ld_what").html("We tried but couldn't load your paper, you should check your network and login again . . .");}}function toFixed(a){var b=a;if((a-0)==a&&a.toString().length>0){b=parseFloat(a).toFixed(2);}return b;}function renderAssessment(f){f.hasonlyprog=f.hasonlyprog&&window.browser>=8;f.highlightCode=!window.isprog&&window.browser>=8;window.assessdata=f;setAssessment();$body.removeClass("loading-content").addClass("rendering-content");$("#ld_main").html("Questions received, rendering paper . . .");$("#ld_what").html("This takes a few seconds, please refresh if not done in 30 seconds . . .");var l=false;var c=$();var b=$("#divSection").remove();var a=$("<div/>").addClass("item");var n='<span style="color:#111;">';var g='<span style="color:#666;">';for(var m=0;m<window.assessdata.qp.length;m++){var i=window.assessdata.qp[m];if(!window.assessdata.ft){i.gls=$.ls.getGroupDetails(i.sseq,i.eseq);}i.hascodetag=f.highlightCode&&/<code\b/.test(i.html);l=l||i.hascodetag;var d=b.clone().removeAttr("id").data(i);var k=[];var h=0.005;if(i.tq>1){k.push(n+i.tq+"</span>"+g+" questions</span>");}if(i.pm>h){k.push(i.pm+" mark"+(i.pm>1?"s":"")+(i.tq>1?" each":""));if(isMobileDevice!==true&&i.nm>h){k.push(n+"&ndash;"+toFixed(i.nm)+" mark"+(i.nm!==1?"s":"")+"</span> "+g+"for incorrect ans</span>");}}rndas(d,i.tq);var j=i.gindex.toString();d.find(".group-title").attr("tabindex",m).find(".number").text(j).end().find(".group-name").text(i.gname).end().find(".group-details").html(k.join(", ")).end().on("click.group",{gindex:i.gindex},function(o){if(!$(this).hasClass("group-selected")){$(".has-selectgroup").trigger("selectgroup",{gindex:o.data.gindex});}});d.addClass("has-selectgroup group-not-selected").on("selectgroup.group",function(q,t){var o=$(q.target);var r=o.hasClass("group-selected");var s=o.data("gindex");if(r&&s!=t.gindex){var p=o.find(".hasanswer").length;o.data("attempt",p);o.removeClass("group-selected").addClass("group-not-selected").data("paper",window.browser>=8?o.find("div.content").detach():true);rndas(o);}else{if(!r&&s==t.gindex){renderquestions(o);o.addClass("group-selected").removeClass("group-not-selected");$("html, body").animate({scrollTop:o.offset().top-firstGroupTop},600);setTimeout(function(){o.triggerHandler("refresh");},20);$.getJSON(__ongoingservice__+"lgc",{gn:o.data("gn"),tl:gettl()});$.ls.scgn(s);}}});c=c.add(a.clone().data("gindex",i.gindex).text(j).attr("title","click to attempt section "+j));$("#questions").append(d);}$.ls.destroyLocalStorage();$("#ld_what").html("Setting up timer . . .");var e=parseInt((window.atime||1800)*0.1,10);if(e>300){e=300;}else{if(e<90){e=90;}}if(f.lut>0){$.ls.storeLut(f.lut);}$timerObject=$("#timer").timer({totalSeconds:window.assessdata.tl,onComplete:submitTest,TickOnStart:true,tickInterval:window.tickInterval,onTick:fireTick,placeHolder:true,alertAt:e});$("#ld_what").html("Setting up network indicator . . .");if(window.browser<8){$("#network-indicator").remove();}else{$networkObject=$("#network-indicator").networkindicator({checking:fireTick});}$("#ld_what").hide();$("#ld_main").html("You are good to go, all the best . . .");$("#loading").hide();$("#divMain").show();firstGroupTop=$(".assessment-group","#questions").first().offset().top;SetGroupMenu(c);$body.removeClass("rendering-content").addClass("on-going");$.getJSON(__ongoingservice__+"lpl",{tl:gettl()});$(".assessment-group","#questions").eq($.ls.gcgn()-1).find(".group-title").click();if(l){getScript("//scripts.cocubes.com/prettify/prettify.js?v=4Mar2013",typeof(window.prettyPrint)=="undefined","script",ApplyCodeFormat);}}function ApplyCodeFormat(a){if(typeof(window.prettyPrint)=="undefined"){return;}a=a||$(".group-selected","#questions");if(a.hasClass("apply-prettyPrint")){a.find("code").addClass("prettyprint linenums").find("br").replaceWith("\r\n").end().end().removeClass("apply-prettyPrint");prettyPrint(null,a[0]);}}function rndas(a,g){var f=a.data();var c=f.attempt;var d=c>0?"Review?":"Attempt?";var b=a.find(".attempt-summary").find(".attempt").text(c).end().find(".review").text(d).end();$("#divmandconf, #divmandquesconf").find(".spnReview").text(d);if(f.isprog){var e="";if(f.status){switch(f.status.toLowerCase()){case"not attempted":e="You haven't attempted this question";break;case"attempted":e="You attempted this question";break;case"saved":e="Your code was saved successfully";break;case"compiled":e="Your code was compiled successfully";break;case"tested":e="Your code has passed all basic test cases";break;}}else{if(c>0){e="You attempted this question";}else{e="You haven't attempted this question";}}b.find(".attemptdet").text(e).end();}if(g>0){b.find(".totalQues").text(g);}}function SetGroupMenu(c){if(c.length>1){if(window.browser>=7){var b=$("#instructions");var a=$("#divgroupmenu");c.last().addClass("last-child").end().off(".menu").addClass("has-selectgroup").on("selectgroup.menu",function(g,h){var f=$(g.target);f.toggleClass("selected-item",f.data("gindex")==h.gindex);}).on("click.menu",function(){var f=$(this);if(!f.hasClass("selected-item")){$(".has-selectgroup").trigger("selectgroup",{gindex:f.data("gindex")});}if(isMobileDevice){a.hide();}});a.append(c);if(!isMobileDevice&&window.screen.width>=1200){a.show();var e=b.offset().top;var d=b.offset().left;a.css({top:e+"px",left:Math.max(0,d-140)+"px"});$window.resize(function(){a.css("left",Math.max(0,b.offset().left-140)+"px");});}}else{$("#divgroupmenu").remove();}}else{$("#divgroupmenu").remove();}}function renderquestions(b){var d=b.data("paper");if(!d){var c=b.data();if(c.isprog){b.codebox(c);}else{if(c.html){for(var g in window.assessdata.keywords){var f=window.assessdata.keywords[g];var e=new RegExp(g,"g");c.html=c.html.replace(e,f);}var a=$(c.html).find("img").error(function(){var h=$(this);var j=h.data("t")||0;var i=h.data("src")||this.src;if(j<4){j=j+1;setTimeout(function(){h.data({t:j,src:i}).attr("src",i+"?t="+j);},Math.floor(Math.random()*201)+200);}else{h.off("error");$.post(__ongoingservice__+"lile",{tl:gettl()});}}).end();b.find(".content").append(a);if(c.radio||c.check){if(c.radio){attachRadio(a,c);}if(c.check){attachChkbox(a,c);}}if(c.sub){attachSub(a,c);}if(c.fill){attachFill(a,c);}c.html=null;c.gls=null;if(c.hascodetag){b.addClass("apply-prettyPrint");ApplyCodeFormat(b);}}}}else{if(window.browser>=8){b.append(d);}}b.removeData("paper");}function attachRadio(a,d){a.find("input.radio").click(radioanswer).end().find(".reset").click(resetanswer);if(d.gls&&$.ls.getLut()>d.lut){for(var e in d.gls){var b=a.filter("#o_"+e);var c=d.gls[e];if(c>0){b.find("#inp_"+e+"_"+c).click();}else{if(c==0){b.find(".reset").click();}}}}}function attachChkbox(b,e){b.find("input.checkbox").click(checkboxanswer);if(e.gls&&$.ls.getLut()>e.lut){for(var g in e.gls){var c=b.filter("#o_"+g);var d=e.gls[g];var a=c.find("input.checkbox").filter(":checked").click().end();if(d>0){for(var f=1;f<=d;f=f<<1){if((d&f)==f){a.filter("#inp_"+g+"_"+f).click();}}}}}}function attachSub(a,c){if(!window.assessdata.sub){window.assessdata.sub={};}var b=c.gls&&$.ls.getLut()>c.lut;a.find("textarea.subjective, textarea.q-wet, textarea.q-type, input.subjective").each(function(){var e=$(this);e.data("val","");var q=e.data();var n=q.seq;var k=window.assessdata.qdata[n];var g="";var p=0;var h=false;var o=window.assessdata.sub[k.id];if(o){g=o.ans||"";p=o.tt||0;}if(b){var j=c.gls[n];g=j||g;h=j&&j.length>0;}if(e.is("textarea")){var d=a.find(".wet-"+k.qid);if(d.length){var m=k.ques.split(k.sep);if(m.length>1){var l=m[0];var f=$("#wetTemp").clone();f.find(".prefix").html(l).end().find(".min-words").html(k.minwc).end().find(".max-words").html(k.maxwc).end().find(".highlight-question").html(k.ques.replace(l+k.sep,"")).end();d.removeClass().html(f);}else{d.html(k.ques);}}if(k.maxwc>300){e.addClass("txtHeight12em");}e.maxwords({span:"#sp_"+n,text:"(Words : {0}, Minimum Words : {1}, Maximum Words : {2})",maxwords:k.maxwc,minwords:k.minwc}).data({tt:p,ft:$.now()});e.focus(function(){setSubAnsUpdate(k.id,this,n,k.qid,k.sid,q.savedraft);});}e.on("blur",function(){updateSubAns(k.id,this,false,n,k.qid,k.sid);});if(g.length){e.val(g);if(h){e.blur();}else{e.data("val",g).keyup();var i=e.triggerHandler("getminwc");if(i===false){e.closest(".hasanswer").removeClass("hasanswer");}}}});}function attachFill(a,c){if(!window.assessdata.sub){window.assessdata.sub={};}var b=c.gls&&$.ls.getLut()>c.lut;a.find("input.fillup").each(function(){var e=$(this);var k=e.data("seq");var j=window.assessdata.qdata[k];var h=false;var f="";var g=window.assessdata.sub[j.id];if(g){f=g.ans||"";}if(b){var i=c.gls[k];f=i||f;h=i&&i.length>0;}var d=a.filter("#q_"+k).find("fill");e.blur(function(){var l=$.trim(this.value);d.text(l);if(e.data("val")!=l){updateSubAns(j.id,this,false,k,j.qid,j.sid);}}).keyup(function(){d.text(this.value);}).val(f).data("val",h?"":f)[h?"blur":"keyup"]();});}function stopKey(d,c,b,a){if(a===true||b===true||((c==13||c==8)&&(d!="submit"&&d!="text"&&d!="textarea"&&d!="input"))||c==123||c==116){return true;}return false;}function hidedialog(){$("#divresult").addClass("invisible");$("#questions, #action").removeClass("invisible");var a=$(this).data("gindex");if(a){$(".has-selectgroup").trigger("selectgroup",{gindex:a});}}function showQuestionStats(){var h=0;var a=$("#tblStats");var e=[];var f=[];var g=[];var c=a.find(".template").clone().removeClass().addClass("item");var b=$();var d=true;$(".assessment-group","#questions").each(function(){var k=$(this);var o=k.data();if(o.isprog){k.triggerHandler("review.codebox");}var m=k.hasClass("group-selected")?k.find(".hasanswer").length:o.attempt;var n=o.status||(m==0?(isMobileDevice?"0":"Not Attempted"):(o.isprog?"Attempted":m.toString()));var l=c.clone().find(".group-name").text(o.gname).end().find(".totques").text(o.tq).end().find(".att").text(n).end().find(".review").data("gindex",o.gindex).text(m==0?"Attempt?":"Review?").click(hidedialog).end();var i=l.find(".mandat");o.mandques=o.mandques||0;if(o.mandques>0&&m<o.mandques){d=false;f.push(o.gindex);i.find(".mandques").text(o.tq==o.mandques?"all":o.mandques).end();}else{for(var r=o.sseq;r<=o.eseq;r++){var q=window.assessdata.qdata[r];if(q&&q.ismand){var j=(k.hasClass("group-selected")||window.browser<8)?k:o.paper;var p=j?j.find("#o_"+r).hasClass("hasanswer"):q.hasanswer;if(p===false){g.push(r+1);}}}d=d&&g.length==0;}if(d){if(m==0){e.push(o.gindex);}}else{i.removeClass("invisible");}b=b.add(l);h=h+m;});if(b.length>1&&!window.assessdata.hasonlyprog){a.find("tfoot").find(".totques").text(window.aqc).end().find(".att").text(h>0?h:"Not Attempted").end().removeClass("invisible");}$("#spanTotQuestions").text(window.aqc);$("#spanTotAttempts").text(h);a.find(".item").remove().end().append(b);if(d){if(e.length){$("#divsubconf").hide();$("#divgrpconf").find(".spngropnos").text(e.join(", ")).end().show();}else{$("#divgrpconf").find("#spngropnos").text("").end().hide();$("#divsubconf").show();}$("#confirmsubmit","#confirmaction").prop("disabled",false);$("#divmandconf, #divmandquesconf").hide();}else{$("#confirmsubmit","#confirmaction").prop("disabled",true);$("#divsubconf, #divgrpconf").hide();if(f.length){$("#divmandconf").find(".spngropnos").text(f.join(", ")).end().show();}else{$("#divmandconf").hide();}if(g.length){$("#divmandquesconf").find(".spnquesnos").text(g.join(", ")).end().show();}else{$("#divmandquesconf").hide();}}$("#questions, #action").addClass("invisible");$("#divresult").removeClass("invisible");}function fireTick(){var a="";if(window.wbcm.monitor){a=savePicture();}if(a!=""||window.wbcm.mandatory===false){$.ajax({url:__ongoingservice__+"iamalive",type:"POST",dataType:"json",cache:false,data:{rc:tickRetryCount,tl:gettl(),image:a,gn:$(".group-selected","#questions").data("gn")||0},error:ontickfail,success:commonCallBack});}}function ontickfail(){tickRetryCount++;$.ls.storeLut();}function stacktrace(){var d="";try{var a=stacktrace.caller;for(var c=0;c<5&&a!=null;c++){d+="."+a;a=a.caller;}}catch(b){}return d;}function submitTest(e){var b=e;e=e===true;var d=gettl();maxSubmitRetryCount=e?Math.round(d/(checkSubmitInterval/1000)):retrySubmitCount+10;if($body.hasClass("on-going")){$body.removeClass("on-going").addClass("submitting");var f=showAnswersheet();f.ua=e;var a=$.sclft("destroy");f.foc=a.foc||0;f.fot=a.fot||0;f.loc=a.loc||0;f.lofoc=a.lofoc||false;if(!e||f.lofoc){showQuestionStats();}else{$timerObject.stopTick();}$("#tblStats").find(".review").remove();$("#divMain, #confirmaction, #divsubconf, #divgrpconf, #divpsycoconf").remove();$("#divsubmitprogress").show();arf(false);var c=getprevtime();if(c){f.oua=b;f.trace=stacktrace()+"|||"+c;f.ts=new Date().toString();f.tl=d;}$.ls.ssb(f);fireSubmit(f);}if(!e&&$body.hasClass("submitting")){$body.removeClass("submitting").addClass("submitted");}}function fireSubmit(b){var a=(b.qna.length>1||b.suba.length>1||b.progs.length>1);$.ajax({type:"POST",url:submitparams.service,data:b,cache:false,dataType:"json",success:function(c){if(c.r===true){$.ls.clear();submitTestMsg(submitparams.correctImg+" Submitted successfully, logging you out . . .",submitparams.submitspan,b.lofoc?10000:400);}else{if(c.cansub===false){$("#divMain, #divresult").remove();$("#invalidSubmit").show();}else{submitfail(a,false);}}},error:function(){if(retrySubmitCount<maxSubmitRetryCount){setTimeout(function(){retrySubmitCount++;if($body.hasClass("submitted")){$(submitparams.retryspan).html("(trial "+retrySubmitCount+" of "+maxSubmitRetryCount+")");}else{$(submitparams.retryspan).html("(trial "+retrySubmitCount+")");}fireSubmit(b);},checkSubmitInterval);}else{submitfail(a,true);}}});}function submitfail(a,b){if(a){$(submitparams.submitspan).html(submitparams.wrongImg+" Unable to submit, please handover your answer-sheet to the invigilator . . .");}else{if(b){$(submitparams.submitspan).html("Your network seems to be disconnected, but all answers were successfully saved before network failure!!");}else{submitTestMsg();}}}function showAnswersheet(){if(answerAjax.r&&answerAjax.r.abort){answerAjax.r.abort();}var e=$();for(var g in mcqlist){j=mcqlist[g];if(j.timer){clearTimeout(j.timer);olist.push(g);delete mcqlist[g];}}var h=[];var k=[];var c=[];var d={};var j,f;for(f=olist.length-1;f>=0;f--){j=$.ls.get(olist[f]);if(j&&!d[j.seq]){h.push(j.id);h.push(j.ans);h.push(j.qid);h.push(j.sid);d[j.seq]=$('<span style="padding-left:20px;"/>').text(j.ans);}}for(f=slist.length-1;f>=0;f--){j=$.ls.get(slist[f]);if(j&&!d[j.seq]){k.push(j.id);k.push(j.anssub);k.push(j.qid);k.push(j.sid);k.push(j.tt);d[j.seq]=$("<pre/>").text(j.anssub);}}if(window.isprog){$(".assessment-group","#questions").each(function(){j=$(this).triggerHandler("submit.codebox");if(j){c.push(j.id);c.push(j.qid);c.push(j.code);c.push(j.lang);c.push(j.gn);d[j.seq]=$("<div/>").append($("<div/>").append("<b>Language:</b>"+(j.lang||1))).append($("<pre/>").text(j.code));}});}for(g in d){var a=$("<td style='text-align:center;vertical-align:top;'/>").text(parseInt(g,10)+1);var b=$("<td style='text-align:left;vertical-align:top;padding-left:8px;'>").append(d[g]);e=e.add($("<tbody/>").append($("<tr/>").append(a).append(b)));}if(e.length){$("#your-answers, #submit-error").show();$("#answer-sheet").append(e);}else{$("#submitProgress").html(submitparams.correctImg+" All attempted answers were submitted successfully . . .");}return{qna:h.length?h:[-1],suba:k.length?k:[-1],progs:c.length?c:[-1],rc:0};}function submitTestMsg(b,a,c){if(b){if(a){$(a).html(b);}else{$("#ld_main").html(b);$("#loading").show();$("#divMain").remove();}}arf(false);$.sclft("destroy");setTimeout(function(){window.location=logoutPath+"?tid="+window.tid+"&uid="+window.uid+"&s=LogoutPage&ts="+$.now();},c||400);}function radioanswer(){var c=$(this).data("seq");var a=window.assessdata.qdata[c];var b={id:a.id,ans:0,seq:c,qid:a.qid,sid:a.sid};b.ans=this.value;$.ls.set(b);olist.push(c);processquesque();$("#r_"+c).removeClass("invisible");$("#o_"+c).addClass("hasanswer");}function checkboxanswer(){var b=$(this);var f=b.data("seq");var d=window.assessdata.qdata[f];var e=mcqlist[f];if(!e){e={id:d.id,seq:f,qid:d.qid,ans:0,sid:d.sid};mcqlist[f]=e;}var c=0;var a=b.parents("#o_"+f);a.find("input.checkbox").each(function(){if(this.checked){c+=parseInt(this.value,10);}});a[c==0?"removeClass":"addClass"]("hasanswer");e.ans=c;$.ls.set($.extend(true,{},e));if(!e.timer){e.timer=setTimeout(function(){e=mcqlist[f];e.timer=null;olist.push(f);delete mcqlist[f];processquesque();},mcqInterval);}}function logDebug(a){if(window.console&&window.console.log){console.log(a);}}function processquesque(){if(answerAjax.t&&((new Date().getTime())-answerAjax.t)<15000){return;}var b=false;var a;if(olist.length){for(a=0;a<olist.length;a++){b=$.ls.get(olist[0])||false;if(b!==false){break;}olist.shift();}}else{if(slist.length){for(a=0;a<slist.length;a++){b=$.ls.get(slist[0])||false;if(!b.isautosave||a==(slist.length-1)){break;}slist.shift();}if(b){b.isBlur=!b.isautosave;}}}if(b!==false){b.tl=gettl();answerAjax.t=new Date().getTime();answerAjax.r=$.ajax({type:"POST",url:(__ongoingservice__+"Answer"),data:b,cache:false,dataType:"json"}).always(clearAnswerAjax).done(commonCallBack);}}function clearAnswerAjax(){answerAjax.t=0;answerAjax.r=null;}function commonCallBack(a){var b="";if(a){if(a.r===true||a.r===false){if(a.rload===true){location.href="?ts="+$.now();}else{switch(a.resp){case 2:$timerObject.resync(1);break;case 4:case 16:case 8:case 32:case 64:submitTestMsg();break;case 128:if(a.tl){$timerObject.resync(a.tl>0?a.tl:1);}if(a.anstime){if(a.id<=0||a.qid<=0||a.r){var c;if(a.sub){c=$.ls.get(slist.shift());$("#s_"+c.seq).removeClass("saving").text(a.anstime);}else{c=$.ls.get(olist.shift());}$.ls.remove(c,a.ans);}$.sclft("user-action");}if(a.r){processquesque();tickRetryCount=0;}b=a.lut;break;}}}else{tickRetryCount++;}}$.ls.storeLut(b);}function setSubAnsUpdate(b,h,e,c,f,d){var a=$(h);if(d){var g=setInterval(function(){updateSubAns(b,h,true,e,c,f);a.data({ft:$.now(),tft:$timerObject.val()});},subAnsAutoSaveInterval);a.data("timer",g);}a.data({ft:$.now(),tft:$timerObject.val()});}function updateSubAns(e,o,f,i,g,j){var a=$(o);var b=$.trim(a.val());var c=a.data("ft")||$.now();var k=a.data("tft")||$timerObject.val();var m=parseInt(($.now()-c)/1000,10);if(m<0){m=0;}var n=parseInt(k,10)-$timerObject.val();if(n<0){n=0;}var l=a.data("tt")||0;l=l+(m>n?m:n);a.data({val:b,tt:l});if(!f){clearInterval(a.data("timer"));}if(b.length>0||l>10){var h={id:e,qid:g,seq:i,tt:l};h.anssub=b;h.ans=(f||b=="")?0:1;h.sid=j;h.isautosave=f;$.ls.set(h);slist.push(i);processquesque();$("#s_"+i).addClass("saving").html("&nbsp; "+imgLoad+(f?" auto-":" ")+"saving answer . . .");var d=a.triggerHandler("getminwc");d=typeof d==="undefined"?true:d;$("#o_"+i)[(b.length==0||d==false)?"removeClass":"addClass"]("hasanswer");}window.assessdata.qdata[i].ismand=b.length>0;}function resetanswer(){var c=$(this).data("seq");var a=window.assessdata.qdata[c];var b={id:a.id,ans:0,seq:c,qid:a.qid,sid:a.sid};b.ans=0;$.ls.set(b);olist.push(c);processquesque();$("#r_"+c).addClass("invisible");$("#o_"+c).removeClass("hasanswer").find("input").prop("checked",false);}function windowSwitchSubmitTest(){submitTest(true);}(function(a,b,g){var f={};var e={};var d=("localStorage" in g)&&typeof(g.localStorage.setItem)!="undefined"&&typeof(g.localStorage.getItem)!="undefined";var c=typeof JSON!="undefined"&&typeof JSON.stringify!="undefined";a.ls={};a.ls.get=function(h){return f[h];};a.ls.set=function(j){if(j){var i=f[j.seq];var k;var h;if(j.anssub){k=!i||i.anssub!=j.anssub;h=j.anssub;}else{if(c&&j.code){k=!i||(i.lang!=j.lang&&i.code!=j.code);h=JSON.stringify(j);}else{k=!i||i.ans!=j.ans;h=j.ans;}}if(k){f[j.seq]=j;if(d){g.localStorage.setItem(j.seq,h);}}}};a.ls.clear=function(){if(d){g.localStorage.clear();}};a.ls.remove=function(j,h,k){if(j!=k&&h!=k){var i;if(j.anssub){i=j.anssub==h;}else{if(j.code){i=j.code==h;}else{i=j.ans==h;}}if(i){if(d){g.localStorage.removeItem(j.seq);}delete f[j.seq];}}};a.ls.getLut=function(){var h=0;if(d){h=parseInt(g.localStorage.getItem("lut")||h,10);}return h;};a.ls.storeLut=function(h){if(d){if(!h){h=parseInt(g.localStorage.getItem("lut")||0,10)+30;}g.localStorage.setItem("lut",h);}};a.ls.gcgn=function(){var h=1;if(d){h=parseInt(g.localStorage.getItem("gn")||h,10);}return h;};a.ls.scgn=function(h){if(d&&h>0){g.localStorage.setItem("gn",h);}};a.ls.ssb=function(i){if(d&&c){g.localStorage.setItem("isb",1);g.localStorage.setItem("ua",JSON.stringify(i));for(var h in g.localStorage){if(isNaN(h)==false){g.localStorage.removeItem(h);}}f={};}};a.ls.getsd=function(){var h=false;var i={};if(d&&c){h=g.localStorage.getItem("isb")==1;if(h){i=JSON.parse(g.localStorage.getItem("ua")||"");}}return{isb:h,ua:i};};a.ls.checkLocalStorage=function(){if(d){if(g.tid!=g.localStorage.getItem("tid")||g.uid!=g.localStorage.getItem("uid")){g.localStorage.clear();g.localStorage.setItem("tid",g.tid);g.localStorage.setItem("uid",g.uid);g.localStorage.setItem("lut",g.lut);}else{for(var h in g.localStorage){if(isNaN(h)==false){e[h]=g.localStorage.getItem(h);e.hasData=true;}}}}};a.ls.getGroupDetails=function(k,h){var i={};if(e.hasData){for(var j=k;j<=h;j++){if(e[j]){i[j]=e[j];}}}return i;};a.ls.destroyLocalStorage=function(){e=null;};})(jQuery,document,window);(function(a,b,j,i){var c=0,f=0,d=0,g=true;var e=null;var h=false;var k=0;a.sclft=function(n){var w="sclft";var y=__ongoingservice__;var r=b&&"onfocusin" in b&&"hasFocus" in b;var s=1000;k=k||j.assessdata.wsc||0;var o=j.assessdata.awsc;var v=o>=0&&o!=255;var m=a("#header-details");var l=a("#divMain");var A;function q(){h=k>o;var B=m.find(".warning");if(B.length==0){B=a(".warning").remove().find(".close-warning").on("click",function(){B.addClass("invisible");}).end();m.append(B);}clearTimeout(A);var E="";var D="";if(h){E="Assessment Alert";D="Due to frequent switching of browser window, your assessment have been automatically submitted!";i(true);}else{if(k<=o){var C=(k==o);E=C?"Final Warning":"Attention";D=C?"Do not move out of the browser window, this is your last warning. Any more switching of browser window and your assessment will be submitted automatically!":"Do not move out of the browser window, else your assessment will be automatically submitted!";}else{B.addClass("invisible");}}if(E.length){B.removeClass("invisible").find(".title").html(E).end().find(".message").html(D).end();}}function x(){if(h===false){A=setTimeout(function(){m.find(".warning").addClass("invisible");},s*10);}}function z(){if(g===true){if(c>0){var B={c:c,t:Math.ceil(f/1000)};c=f=0;a.post(y+"uflt",B).always(function(C){if(C!=1){c+=B.c;f+=B.t*1000;}if(v===true){x();}});}else{c=f=0;}}}function t(){var E=function(){if(g===true&&e==null){e=setTimeout(function(){if(g===true){g=false;c++;k++;d=new Date();a.post(y+"uflc");if(v===true){q();}}},s);}};var D=function(){if(g===false){setTimeout(function(){if(g===false){g=true;var F=new Date()-d;f+=Math.max(F,0);z();}},s);}else{if(e!==null){clearTimeout(e);e=null;}}};var B=false;if(typeof j.blur==="function"){j.onblur=E;j.onfocus=D;B=true;}else{if(r){b.onfocusout=E;b.onfocusin=D;B=true;}}if(B){var C=l.on("user-action",D);a(j).data(w,true).data(w+"-ctrl",C);}}function p(){if(l.length==0){if(typeof j.blur==="function"){j.onblur=null;j.onfocus=null;}else{b.onfocusout=null;b.onfocusin=null;}a(j).removeData(w).removeData(w+"-ctrl");if(g===false&&c>0){var B=new Date()-d;f+=Math.max(B,0);g=true;}}return{foc:c,fot:Math.ceil(f/1000),loc:k,lofoc:h};}var u=a(j).data(w);if(u===true){switch(n){case"destroy":return p();case"update":z();break;case"user-action":if(g===false){a(j).data(w+"-ctrl").triggerHandler(n);}else{z();}break;}}else{if(!n&&u!==true){t();}}return false;};})(jQuery,document,window,submitTest);
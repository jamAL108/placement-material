(function(a){a.fn.networkindicator=function(c){var b=function(d,l){var j=true;var h=0;var i=false;d.off("click.network").on("click.network",k);function k(){if(i===false){i=true;e();d.removeClass("disconnected connected").addClass("checking");if(typeof(l.checking)=="function"){l.checking();}d.triggerHandler("reconnect");}}function f(){m();if(j===false){n();if(d.hasClass("disconnected")||d.hasClass("checking")){d.removeClass("disconnected").addClass("connected");setTimeout(function(){if(j===true){d.removeClass("connected");}},500);}}}function n(){a(document).off("ajaxSuccess.network");j=true;h=0;}function e(){j=false;a(document).off("ajaxSuccess.network").on("ajaxSuccess.network",f);}function m(){if(i===true){d.removeClass("checking");i=false;}}function g(){m();h++;if(j===true){e();}if(h>=l.after){d.removeClass("connected").addClass("disconnected");}}a(document).on("ajaxError.network",g);d.data("network-monitor",true);d.data("network-monitor-control",d);};return this.each(function(){var e={version:"2.0.0",after:3,checking:false};var d=a(this);if(d.data("network-monitor")!==true){d.removeData("network-monitor-control").off(".network");b(d,a.extend(true,e,c));}else{d=d.data("network-monitor-control");}return d;});};})(jQuery);
(function(a){var b=("textContent" in document.createElement("input"))?"textContent":"innerText";a.fn.timer=function(d){var c=function(f,p){var o=p.mainTimer;var x=o.totalSeconds;var g=o.isUpCounter?1:-1;var u=p.tickInterval;var l=typeof(p.onComplete)=="function";var m=typeof(p.onTick)=="function";var i=false;var w=p.timerObjects;var v=w.length;var n=new Date();var q=[];function t(){var B=new Date();var y=(B.getTime()-n.getTime());if(y>30000||y<=0){q.push(n);q.push(B);}var A=((i&&y>1000)?Math.floor(y/1000):1);x=x+(g*A);n=new Date();if(x>0){if(m&&(x%u)===0){setTimeout(p.onTick,10);}}else{h();}for(var z=0;z<v;z++){var C=w[z];if(C.pause!==true&&C.completed!==true){C.totalSeconds=C.totalSeconds+C.adjust*A;f.updateDisplay(C);if(C.totalSeconds<=0){if(l){p.onComplete(z,w);}C.completed=true;C.totalSeconds=0;}}}}f.updateDisplay=function(A){if(A.alertAt){if((A.isUpCounter&&A.totalSeconds>=A.alertAt)||(!A.isUpCounter&&A.totalSeconds<=A.alertAt)){if(!A.hasAlert){A.hasAlert=true;A.container.addClass("alert-time");}}else{if(A.hasAlert){A.hasAlert=false;A.container.removeClass("alert-time");}}}if(A.renderAs){var y=0,z=0;var C=A.totalSeconds>0?A.totalSeconds:0;if(A.isUpCounter){A.hasDays=C>86400;A.hashours=C>3600;}if(A.hasDays){y=Math.floor(C/86400);C-=(y*86400);}if(A.hashours){z=Math.floor(C/3600);C-=(z*3600);}var B=Math.floor(C/60);C-=(B*60);A.renderAs(y,z,B,C,A.totalSeconds,A.container,A);}return f;};function s(z,A,D,E,F,y,C){if(!C.format){if(y.is("table")){C.renderAs=false;return false;}var B=[];if(C.hasDays){B.push(j(z)+(z>1?" days ":" day "));}if(C.hashours){B.push(j(A)+(A>1?" hours ":" hour "));}B.push(j(D)+(D>1?" mins ":" min "));B.push(j(E)+(E>1?" secs ":" sec "));y.text(B.join(""));}else{y.text(C.format.replace("{0}",j(z)).replace("{1}",j(A)).replace("{2}",j(D)).replace("{3}",j(E)));}return true;}function j(y){return(y>9?y:("0"+y));}function r(z,A,C,D,E,y,B){if(B.hasDays&&B.domdays){B.domdays[b]=j(z);}if(B.hashours&&B.domhours){B.domhours[b]=j(A);}if(B.domMinutes){B.domMinutes[b]=j(C);}if(B.domSeconds){B.domSeconds[b]=j(D);}}function h(){if(i){clearInterval(i);i=false;}}f.start=function(){h();n=new Date();i=setInterval(t,980);return f;};f.pause=function(){h();return f;};f.stop=function(){h();f.reset();return f;};f.timerObjectVal=function(y){var A=0;if(y>=0&&v>y){var z=w[y];A=z.totalSeconds;}return A;};f.pauseTimerObject=function(y){if(y>=0&&v>y){var z=w[y];if(z.isMain===false&&z.pause===false&&z.completed===false){w[y].pause=true;}}};f.unpauseTimerObject=function(y){if(y>=0&&v>y){var z=w[y];if(z.isMain===false&&z.pause===true&&z.completed===false){w[y].pause=false;}}};f.resyncTimerObject=function(y,A){if(y>=0&&A>0&&v>y){var z=w[y];if(z.completed===false){z.totalSeconds=A;}if(z.isMain){x=A;}}};f.reset=function(){x=o.cacheTotalSeconds;for(var y=0;y<v;y++){var z=w[y];if(z.completed===false){z.totalSeconds=z.cacheTotalSeconds;}}return f;};f.updateOnTick=function(y){if(typeof y==="function"){p.onTick=y;}return f;};f.val=function(y){if(y!==undefined){x=y>0?y:x;o.totalSeconds=x;return f;}else{return x;}};f.prevtime=function(){var A=[];try{for(var z=0;z<q.length;z++){A.push(q[z].toString());}}catch(y){}return A.join(",");};f.resync=function(C){if(C>0){var B=x;x=C;var A=o.isUpCounter?(B-C):(C-B);for(var y=0;y<v;y++){var z=w[y];if(z.completed===false){z.totalSeconds=z.isUpCounter?(z.totalSeconds-A):(z.totalSeconds+A);if(z.totalSeconds<0){z.totalSeconds=0;}}}}};f.stopTick=function(){m=false;p.onTick=null;};f.destroy=function(){f.pause();f.removeData("timer");};f.setInterval=function(y){p.tickInterval=y;};function k(){for(var y=0;y<v;y++){var z=w[y];z.hasDays=z.isUpCounter||z.totalSeconds>86400;z.hashours=z.isUpCounter||z.totalSeconds>3600;z.cacheTotalSeconds=z.totalSeconds;z.adjust=z.isUpCounter?1:-1;z.hasAlert=z.container.hasClass("alert-time");z.renderAs=z.renderTimer||(z.placeHolder?r:s);if(z.placeHolder){if(!z.hasDays){z.container.find(".days").hide();}if(!z.hashours){z.container.find(".hours").hide();}z.domdays=z.hasDays&&z.container.find(".day")[0]||false;z.domhours=z.hashours&&z.container.find(".hour")[0]||false;z.domMinutes=z.container.find(".minute")[0]||false;z.domSeconds=z.container.find(".second")[0]||false;}f.updateDisplay(z);}}k();f.data("timer",f).show().start();if(m&&p.TickOnStart){setTimeout(p.onTick,10);}};var e=this;this.each(function(j){var g=e.eq(j);var f=g.data("timer");if(!f){var m={version:"4.5.3",TickOnStart:false,onComplete:false,onTick:false,tickInterval:30,timerObjects:[]};var k={isMain:true,container:g,totalSeconds:d.totalSeconds,isUpCounter:d.isUpCounter,placeHolder:d.placeHolder,alertAt:d.alertAt,renderTimer:d.renderTimer};d.timerObjects?d.timerObjects.push(k):m.timerObjects.push(k);var l=a.extend(false,m,{TickOnStart:d.TickOnStart,onComplete:d.onComplete,onTick:d.onTick,tickInterval:d.tickInterval,timerObjects:d.timerObjects});for(var h=0;h<l.timerObjects.length;h++){var n=l.timerObjects[h];var o={isMain:false,container:false,totalSeconds:!!n.isUpCounter?0:2147483647,isUpCounter:false,placeHolder:false,alertAt:false,renderTimer:false,completed:false};n=a.extend(false,o,n);l.timerObjects[h]=n;if(n.isMain){l.mainTimer=n;}}c(g,l);f=g;}else{if(typeof d==="string"&&typeof(f[d])==="function"){f[d]();}}if(e.length==1){e=f;}});return e;};})(jQuery);